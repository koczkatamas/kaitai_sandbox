{
  "meta": {
    "id": "exif",
    "endian": "be"
  },
  "seq": [
    {
      "id": "endianness",
      "size": 2
    },
    {
      "id": "version",
      "type": "u2"
    },
    {
      "id": "ifd0_ofs",
      "type": "u4"
    }
  ],
  "instances": {
    "ifd0": {
      "type": "ifd",
      "pos": "ifd0_ofs"
    }
  },
  "types": {
    "ifd": {
      "seq": [
        {
          "id": "num_fields",
          "type": "u2"
        },
        {
          "id": "fields",
          "type": "ifd_field",
          "repeat": "expr",
          "repeat-expr": "num_fields"
        },
        {
          "id": "next_ifd_ofs",
          "type": "u4"
        }
      ],
      "instances": {
        "next_ifd": {
          "pos": "next_ifd_ofs",
          "type": "ifd",
          "if": "next_ifd_ofs != 0"
        }
      }
    },
    "ifd_field": {
      "seq": [
        {
          "id": "tag",
          "type": "u2",
          "enum": "tag"
        },
        {
          "id": "field_type",
          "type": "u2",
          "enum": "field_type"
        },
        {
          "id": "length",
          "type": "u4"
        },
        {
          "id": "ofs_or_data",
          "type": "u4"
        }
      ],
      "instances": {
        "type_byte_length": {
          "value": "field_type == field_type::word ? 2 : (field_type == field_type::dword ? 4 : 1)"
        },
        "byte_length": {
          "value": "length * type_byte_length"
        },
        "is_immediate_data": {
          "value": "byte_length <= 4"
        },
        "data": {
          "pos": "ofs_or_data",
          "size": "byte_length",
          "if": "not is_immediate_data",
          "io": "_root._io"
        }
      },
      "enums": {
        "field_type": {
          "1": "byte",
          "2": "ascii_string",
          "3": "word",
          "4": "dword",
          "5": "rational"
        },
        "tag": {
          "256": "image_width",
          "257": "image_height",
          "258": "bits_per_sample",
          "259": "compression",
          "262": "photometric_interpretation",
          "263": "thresholding",
          "264": "cell_width",
          "265": "cell_length",
          "266": "fill_order",
          "269": "document_name",
          "270": "image_description",
          "271": "make",
          "272": "model",
          "273": "strip_offsets",
          "274": "orientation",
          "277": "samples_per_pixel",
          "278": "rows_per_strip",
          "279": "strip_byte_counts",
          "280": "min_sample_value",
          "281": "max_sample_value",
          "282": "x_resolution",
          "283": "y_resolution",
          "284": "planar_configuration",
          "285": "page_name",
          "286": "x_position",
          "287": "y_position",
          "288": "free_offsets",
          "289": "free_byte_counts",
          "290": "gray_response_unit",
          "291": "gray_response_curve",
          "292": "t4_options",
          "293": "t6_options",
          "296": "resolution_unit",
          "297": "page_number",
          "300": "color_response_unit",
          "301": "transfer_function",
          "305": "software",
          "306": "modify_date",
          "315": "artist",
          "316": "host_computer",
          "317": "predictor",
          "318": "white_point",
          "319": "primary_chromaticities",
          "320": "color_map",
          "321": "halftone_hints",
          "322": "tile_width",
          "323": "tile_length",
          "324": "tile_offsets",
          "325": "tile_byte_counts",
          "326": "bad_fax_lines",
          "327": "clean_fax_data",
          "328": "consecutive_bad_fax_lines",
          "330": "sub_ifd",
          "332": "ink_set",
          "333": "ink_names",
          "334": "numberof_inks",
          "336": "dot_range",
          "337": "target_printer",
          "338": "extra_samples",
          "339": "sample_format",
          "340": "s_min_sample_value",
          "341": "s_max_sample_value",
          "342": "transfer_range",
          "343": "clip_path",
          "344": "x_clip_path_units",
          "345": "y_clip_path_units",
          "346": "indexed",
          "347": "jpeg_tables",
          "351": "opi_proxy",
          "400": "global_parameters_ifd",
          "401": "profile_type",
          "402": "fax_profile",
          "403": "coding_methods",
          "404": "version_year",
          "405": "mode_number",
          "433": "decode",
          "434": "default_image_color",
          "435": "t82_options",
          "437": "jpeg_tables",
          "512": "jpeg_proc",
          "513": "thumbnail_offset",
          "514": "thumbnail_length",
          "515": "jpeg_restart_interval",
          "517": "jpeg_lossless_predictors",
          "518": "jpeg_point_transforms",
          "519": "jpegq_tables",
          "520": "jpegdc_tables",
          "521": "jpegac_tables",
          "529": "y_cb_cr_coefficients",
          "530": "y_cb_cr_sub_sampling",
          "531": "y_cb_cr_positioning",
          "532": "reference_black_white",
          "559": "strip_row_counts",
          "700": "application_notes",
          "999": "uspto_miscellaneous",
          "4096": "related_image_file_format",
          "4097": "related_image_width",
          "4098": "related_image_height",
          "18246": "rating",
          "18247": "xp_dip_xml",
          "18248": "stitch_info",
          "18249": "rating_percent",
          "28672": "sony_raw_file_type",
          "28722": "light_falloff_params",
          "28725": "chromatic_aberration_corr_params",
          "28727": "distortion_corr_params",
          "32781": "image_id",
          "32931": "wang_tag1",
          "32932": "wang_annotation",
          "32933": "wang_tag3",
          "32934": "wang_tag4",
          "32953": "image_reference_points",
          "32954": "region_xform_tack_point",
          "32955": "warp_quadrilateral",
          "32956": "affine_transform_mat",
          "32995": "matteing",
          "32996": "data_type",
          "32997": "image_depth",
          "32998": "tile_depth",
          "33300": "image_full_width",
          "33301": "image_full_height",
          "33302": "texture_format",
          "33303": "wrap_modes",
          "33304": "fov_cot",
          "33305": "matrix_world_to_screen",
          "33306": "matrix_world_to_camera",
          "33405": "model2",
          "33421": "cfa_repeat_pattern_dim",
          "33422": "cfa_pattern2",
          "33423": "battery_level",
          "33424": "kodak_ifd",
          "33432": "copyright",
          "33434": "exposure_time",
          "33437": "f_number",
          "33445": "md_file_tag",
          "33446": "md_scale_pixel",
          "33447": "md_color_table",
          "33448": "md_lab_name",
          "33449": "md_sample_info",
          "33450": "md_prep_date",
          "33451": "md_prep_time",
          "33452": "md_file_units",
          "33550": "pixel_scale",
          "33589": "advent_scale",
          "33590": "advent_revision",
          "33628": "uic1_tag",
          "33629": "uic2_tag",
          "33630": "uic3_tag",
          "33631": "uic4_tag",
          "33723": "iptc_naa",
          "33918": "intergraph_packet_data",
          "33919": "intergraph_flag_registers",
          "33920": "intergraph_matrix",
          "33921": "ingr_reserved",
          "33922": "model_tie_point",
          "34016": "site",
          "34017": "color_sequence",
          "34018": "it8_header",
          "34019": "raster_padding",
          "34020": "bits_per_run_length",
          "34021": "bits_per_extended_run_length",
          "34022": "color_table",
          "34023": "image_color_indicator",
          "34024": "background_color_indicator",
          "34025": "image_color_value",
          "34026": "background_color_value",
          "34027": "pixel_intensity_range",
          "34028": "transparency_indicator",
          "34029": "color_characterization",
          "34030": "hc_usage",
          "34031": "trap_indicator",
          "34032": "cmyk_equivalent",
          "34118": "sem_info",
          "34152": "afcp_iptc",
          "34232": "pixel_magic_jbig_options",
          "34263": "jpl_carto_ifd",
          "34264": "model_transform",
          "34306": "wb_grgb_levels",
          "34310": "leaf_data",
          "34377": "photoshop_settings",
          "34665": "exif_offset",
          "34675": "icc_profile",
          "34687": "tiff_fx_extensions",
          "34688": "multi_profiles",
          "34689": "shared_data",
          "34690": "t88_options",
          "34732": "image_layer",
          "34735": "geo_tiff_directory",
          "34736": "geo_tiff_double_params",
          "34737": "geo_tiff_ascii_params",
          "34750": "jbig_options",
          "34850": "exposure_program",
          "34852": "spectral_sensitivity",
          "34853": "gps_info",
          "34855": "iso",
          "34856": "opto_electric_conv_factor",
          "34857": "interlace",
          "34858": "time_zone_offset",
          "34859": "self_timer_mode",
          "34864": "sensitivity_type",
          "34865": "standard_output_sensitivity",
          "34866": "recommended_exposure_index",
          "34867": "iso_speed",
          "34868": "iso_speed_latitudeyyy",
          "34869": "iso_speed_latitudezzz",
          "34908": "fax_recv_params",
          "34909": "fax_sub_address",
          "34910": "fax_recv_time",
          "34929": "fedex_edr",
          "34954": "leaf_sub_ifd",
          "36864": "exif_version",
          "36867": "date_time_original",
          "36868": "create_date",
          "36873": "google_plus_upload_code",
          "36880": "offset_time",
          "36881": "offset_time_original",
          "36882": "offset_time_digitized",
          "37121": "components_configuration",
          "37122": "compressed_bits_per_pixel",
          "37377": "shutter_speed_value",
          "37378": "aperture_value",
          "37379": "brightness_value",
          "37380": "exposure_compensation",
          "37381": "max_aperture_value",
          "37382": "subject_distance",
          "37383": "metering_mode",
          "37384": "light_source",
          "37385": "flash",
          "37386": "focal_length",
          "37387": "flash_energy",
          "37388": "spatial_frequency_response",
          "37389": "noise",
          "37390": "focal_plane_x_resolution",
          "37391": "focal_plane_y_resolution",
          "37392": "focal_plane_resolution_unit",
          "37393": "image_number",
          "37394": "security_classification",
          "37395": "image_history",
          "37396": "subject_area",
          "37397": "exposure_index",
          "37398": "tiff_ep_standard_id",
          "37399": "sensing_method",
          "37434": "cip3_data_file",
          "37435": "cip3_sheet",
          "37436": "cip3_side",
          "37439": "sto_nits",
          "37500": "maker_note",
          "37510": "user_comment",
          "37520": "sub_sec_time",
          "37521": "sub_sec_time_original",
          "37522": "sub_sec_time_digitized",
          "37679": "ms_document_text",
          "37680": "ms_property_set_storage",
          "37681": "ms_document_text_position",
          "37724": "image_source_data",
          "37888": "ambient_temperature",
          "37889": "humidity",
          "37890": "pressure",
          "37891": "water_depth",
          "37892": "acceleration",
          "37893": "camera_elevation_angle",
          "40091": "xp_title",
          "40092": "xp_comment",
          "40093": "xp_author",
          "40094": "xp_keywords",
          "40095": "xp_subject",
          "40960": "flashpix_version",
          "40961": "color_space",
          "40962": "exif_image_width",
          "40963": "exif_image_height",
          "40964": "related_sound_file",
          "40965": "interop_offset",
          "40976": "samsung_raw_pointers_offset",
          "40977": "samsung_raw_pointers_length",
          "41217": "samsung_raw_byte_order",
          "41218": "samsung_raw_unknown?",
          "41483": "flash_energy",
          "41484": "spatial_frequency_response",
          "41485": "noise",
          "41486": "focal_plane_x_resolution",
          "41487": "focal_plane_y_resolution",
          "41488": "focal_plane_resolution_unit",
          "41489": "image_number",
          "41490": "security_classification",
          "41491": "image_history",
          "41492": "subject_location",
          "41493": "exposure_index",
          "41494": "tiff_ep_standard_id",
          "41495": "sensing_method",
          "41728": "file_source",
          "41729": "scene_type",
          "41730": "cfa_pattern",
          "41985": "custom_rendered",
          "41986": "exposure_mode",
          "41987": "white_balance",
          "41988": "digital_zoom_ratio",
          "41989": "focal_length_in35mm_format",
          "41990": "scene_capture_type",
          "41991": "gain_control",
          "41992": "contrast",
          "41993": "saturation",
          "41994": "sharpness",
          "41995": "device_setting_description",
          "41996": "subject_distance_range",
          "42016": "image_unique_id",
          "42032": "owner_name",
          "42033": "serial_number",
          "42034": "lens_info",
          "42035": "lens_make",
          "42036": "lens_model",
          "42037": "lens_serial_number",
          "42112": "gdal_metadata",
          "42113": "gdal_no_data",
          "42240": "gamma",
          "44992": "expand_software",
          "44993": "expand_lens",
          "44994": "expand_film",
          "44995": "expand_filter_lens",
          "44996": "expand_scanner",
          "44997": "expand_flash_lamp",
          "48129": "pixel_format",
          "48130": "transformation",
          "48131": "uncompressed",
          "48132": "image_type",
          "48256": "image_width",
          "48257": "image_height",
          "48258": "width_resolution",
          "48259": "height_resolution",
          "48320": "image_offset",
          "48321": "image_byte_count",
          "48322": "alpha_offset",
          "48323": "alpha_byte_count",
          "48324": "image_data_discard",
          "48325": "alpha_data_discard",
          "50215": "oce_scanjob_desc",
          "50216": "oce_application_selector",
          "50217": "oce_id_number",
          "50218": "oce_image_logic",
          "50255": "annotations",
          "50341": "print_im",
          "50547": "original_file_name",
          "50560": "uspto_original_content_type",
          "50706": "dng_version",
          "50707": "dng_backward_version",
          "50708": "unique_camera_model",
          "50709": "localized_camera_model",
          "50710": "cfa_plane_color",
          "50711": "cfa_layout",
          "50712": "linearization_table",
          "50713": "black_level_repeat_dim",
          "50714": "black_level",
          "50715": "black_level_delta_h",
          "50716": "black_level_delta_v",
          "50717": "white_level",
          "50718": "default_scale",
          "50719": "default_crop_origin",
          "50720": "default_crop_size",
          "50721": "color_matrix1",
          "50722": "color_matrix2",
          "50723": "camera_calibration1",
          "50724": "camera_calibration2",
          "50725": "reduction_matrix1",
          "50726": "reduction_matrix2",
          "50727": "analog_balance",
          "50728": "as_shot_neutral",
          "50729": "as_shot_white_xy",
          "50730": "baseline_exposure",
          "50731": "baseline_noise",
          "50732": "baseline_sharpness",
          "50733": "bayer_green_split",
          "50734": "linear_response_limit",
          "50735": "camera_serial_number",
          "50736": "dng_lens_info",
          "50737": "chroma_blur_radius",
          "50738": "anti_alias_strength",
          "50739": "shadow_scale",
          "50740": "sr2_private",
          "50741": "maker_note_safety",
          "50752": "raw_image_segmentation",
          "50778": "calibration_illuminant1",
          "50779": "calibration_illuminant2",
          "50780": "best_quality_scale",
          "50781": "raw_data_unique_id",
          "50784": "alias_layer_metadata",
          "50827": "original_raw_file_name",
          "50828": "original_raw_file_data",
          "50829": "active_area",
          "50830": "masked_areas",
          "50831": "as_shot_icc_profile",
          "50832": "as_shot_pre_profile_matrix",
          "50833": "current_icc_profile",
          "50834": "current_pre_profile_matrix",
          "50879": "colorimetric_reference",
          "50885": "s_raw_type",
          "50898": "panasonic_title",
          "50899": "panasonic_title2",
          "50931": "camera_calibration_sig",
          "50932": "profile_calibration_sig",
          "50933": "profile_ifd",
          "50934": "as_shot_profile_name",
          "50935": "noise_reduction_applied",
          "50936": "profile_name",
          "50937": "profile_hue_sat_map_dims",
          "50938": "profile_hue_sat_map_data1",
          "50939": "profile_hue_sat_map_data2",
          "50940": "profile_tone_curve",
          "50941": "profile_embed_policy",
          "50942": "profile_copyright",
          "50964": "forward_matrix1",
          "50965": "forward_matrix2",
          "50966": "preview_application_name",
          "50967": "preview_application_version",
          "50968": "preview_settings_name",
          "50969": "preview_settings_digest",
          "50970": "preview_color_space",
          "50971": "preview_date_time",
          "50972": "raw_image_digest",
          "50973": "original_raw_file_digest",
          "50974": "sub_tile_block_size",
          "50975": "row_interleave_factor",
          "50981": "profile_look_table_dims",
          "50982": "profile_look_table_data",
          "51008": "opcode_list1",
          "51009": "opcode_list2",
          "51022": "opcode_list3",
          "51041": "noise_profile",
          "51043": "time_codes",
          "51044": "frame_rate",
          "51058": "t_stop",
          "51081": "reel_name",
          "51089": "original_default_final_size",
          "51090": "original_best_quality_size",
          "51091": "original_default_crop_size",
          "51105": "camera_label",
          "51107": "profile_hue_sat_map_encoding",
          "51108": "profile_look_table_encoding",
          "51109": "baseline_exposure_offset",
          "51110": "default_black_render",
          "51111": "new_raw_image_digest",
          "51112": "raw_to_preview_gain",
          "51125": "default_user_crop",
          "59932": "padding",
          "59933": "offset_schema",
          "65000": "owner_name",
          "65001": "serial_number",
          "65002": "lens",
          "65024": "kdc_ifd",
          "65100": "raw_file",
          "65101": "converter",
          "65102": "white_balance",
          "65105": "exposure",
          "65106": "shadows",
          "65107": "brightness",
          "65108": "contrast",
          "65109": "saturation",
          "65110": "sharpness",
          "65111": "smoothness",
          "65112": "moire_filter"
        }
      }
    }
  }
}